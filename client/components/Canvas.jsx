import React, { useEffect } from 'react'
import { useDispatch, useSelector } from 'react-redux'
import { fetchPixels } from '../actions'
import hash from 'hash-string'

function Canvas () {
  // // Uncomment when backend is working
  // const pixels = useSelector(state => state.pixels)
  const pixels = ['#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555','#000000', '#CCCCCC', '#555555', '#555555', '#555555']

  const dispatch = useDispatch()
  useEffect(() => {
    dispatch(fetchPixels())
  }, [])

  return (
    <>
      <div className='container'>
        {/* Outer container - 20x20 */}
        <div className='canvas'>
          {pixels.map(pixel => (
            <div key={hash(pixel + Math.random())} style={{backgroundColor: pixel}} className='canvas__pixel'>
            </div>
          ))}
        </div>
      </div>
    </>
  )
}

export default Canvas